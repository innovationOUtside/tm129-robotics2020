
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4 Exploring the nbev3devsim simulator &#8212; TM129 Robotics Practical Activities</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.e8e5499552300ddf5d7adccae7cc3b70.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5 An example robot program" href="01.5%20Example%20robot%20program.html" />
    <link rel="prev" title="3 The RoboLab simulated on-screen robot (nbev3devsim)" href="01.3%20Introducing%20nbev3devsim.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      <h1 class="site-logo" id="site-title">TM129 Robotics Practical Activities</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../README_FIRST.html">
   Welcome to the TM129 Robotics block
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00_FOR_VLE/Section_00_01_Introduction.html">
   1 Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../00_NOTES_FOR_TUTORS/GETTING_STARTED.html">
   Getting started
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="01.1%20Jupyter%20environment.html">
   1 Introduction to the TM129 Jupyter notebook environment
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="01.2%20Exploring%20the%20notebook%20environment.html">
     2 The interactive read-writable notebook environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="01.3%20Introducing%20nbev3devsim.html">
     3 The RoboLab simulated on-screen robot (
     <code class="docutils literal notranslate">
      <span class="pre">
       nbev3devsim
      </span>
     </code>
     )
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     4 Exploring the
     <code class="docutils literal notranslate">
      <span class="pre">
       nbev3devsim
      </span>
     </code>
     simulator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="01.5%20Example%20robot%20program.html">
     5 An example robot program
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="01.6%20Working%20With%20Simulators.html">
     6 Working with simulators
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02.%20Getting%20started%20with%20robot%20and%20Python%20programming/02.1%20Robot%20programming%20constructs.html">
   1 An introduction to programming robots
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02.%20Getting%20started%20with%20robot%20and%20Python%20programming/02.2%20Creating%20your%20own%20robot%20programs.html">
     2 Creating your own robot programs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02.%20Getting%20started%20with%20robot%20and%20Python%20programming/02.3%20General%20programming%20concepts.html">
     3.1 Constants and variables in programs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02.%20Getting%20started%20with%20robot%20and%20Python%20programming/02.4%20Getting%20started%20with%20sensors.html">
     4 Robot sensors and data logging
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03.%20Controlling%20program%20execution%20flow/03.1%20Program%20control%20using%20for%20loops.html">
   1 Introduction to program control flow
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03.%20Controlling%20program%20execution%20flow/03.2%20Program%20control%20using%20while%20loops%20and%20blocking.html">
     2 Program control flow using a
     <code class="docutils literal notranslate">
      <span class="pre">
       while...
      </span>
     </code>
     loop
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03.%20Controlling%20program%20execution%20flow/03.3%20Program%20control%20flow%20using%20branches.html">
     3 Branches
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03.%20Controlling%20program%20execution%20flow/03.4%20Example%20robot%20control%20programs.html">
     4 Example robot control programs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03.%20Controlling%20program%20execution%20flow/03.5%20Some%20RoboLab%20challenges.html">
     5 RoboLab challenges
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03.%20Controlling%20program%20execution%20flow/03.6%20Optional%20RoboLab%20challenges.html">
     6 Optional challenges
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../04.%20Not%20quite%20intelligent%20robots/04.1%20Introducing%20program%20functions.html">
   1 Introduction to functions and robot control strategies
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../04.%20Not%20quite%20intelligent%20robots/04.2%20Robot%20navigation%20using%20dead%20reckoning.html">
     2 Dead reckoning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04.%20Not%20quite%20intelligent%20robots/04.3%20Emergent%20robot%20behaviour%20and%20simple%20data%20charts.html">
     3 Emergent robot behaviour and simple data charts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04.%20Not%20quite%20intelligent%20robots/04.4%20Reasoning%20with%20Eliza.html">
     4 Reasoning with Eliza
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04.%20Not%20quite%20intelligent%20robots/04.5%20Reasoning%20with%20rule%20based%20systems.html">
     5 Reasoning with rule-based systems – Durable Rules Engine
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../05.%20Experimenting%20with%20sensors/05.1%20Introducing%20sensor%20based%20control.html">
   Introduction to sensor-based control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06.%20Where%20in%20the%20world%20are%20we/06.1%20Introducing%20sensor%20based%20navigation.html">
   Introducing sensor-based navigation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../07.%20Neural%20networks/07.1%20Introducing%20neural%20networks.html">
   1 Introducing neural networks
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../08.%20Remote%20services%20and%20multi-agent%20systems/08.1%20Introducing%20remote%20services%20and%20multi-agent%20systems.html">
   1 An introduction to remote services and multi-agent systems
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../08.%20Remote%20services%20and%20multi-agent%20systems/08.2%20Collecting%20digit%20image%20and%20class%20data%20from%20the%20simulator.html">
     2 Collecting digit image and class data from the simulator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08.%20Remote%20services%20and%20multi-agent%20systems/08.3%20Recognising%20digits%20using%20a%20convolutional%20neural%20network%20%28optional%29.html">
     3 Recognising digits using a convolutional neural network (optional)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08.%20Remote%20services%20and%20multi-agent%20systems/08.4%20Recognising%20patterns%20on%20the%20move.html">
     4 Recognising patterns on the move
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08.%20Remote%20services%20and%20multi-agent%20systems/08.5%20Messaging%20in%20multi-agent%20systems.html">
     5 Messaging in multi-agent systems
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08.%20Remote%20services%20and%20multi-agent%20systems/08.6%20Conclusion.html">
     6 Conclusion
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/01. Introducing notebooks and the RoboLab environment/01.4 Exploring nbev3devsim.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/01. Introducing notebooks and the RoboLab environment/01.4 Exploring nbev3devsim.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-simulator-environment-as-a-laboratory">
   4.1 The simulator environment as a laboratory
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up-the-laboratory-via-the-simulator-user-interface">
   4.2 Setting up the laboratory via the simulator user interface
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#activity-using-simulator-toggle-button-controls-to-hide-and-reveal-simulator-widget-display-panels">
     4.2.1 Activity – Using simulator toggle button controls to hide and reveal simulator widget display panels
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#activity-loading-different-backgrounds-into-the-simulator">
     4.2.2 Activity – Loading different backgrounds into the simulator
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up-the-laboratory-helper-magics">
   4.3 Setting up the laboratory – helper magics
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#activity-using-magic-to-toggle-the-display-of-particular-simulator-panels">
     4.3.1 Activity – Using magic to toggle the display of particular simulator panels
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#activity-using-magic-to-load-in-a-particular-background">
     4.3.2 Activity – Using magic to load in a particular background
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#downloading-code-to-the-simulator">
   4.4 Downloading code to the simulator
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#activity-downloading-your-own-program">
     4.4.1 Activity – Downloading your own program
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example-solution">
       Example solution
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#showing-a-downloaded-program-listing">
     4.4.2 Showing a downloaded program listing
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   4.5 Summary
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="exploring-the-nbev3devsim-simulator">
<h1>4 Exploring the <code class="docutils literal notranslate"><span class="pre">nbev3devsim</span></code> simulator<a class="headerlink" href="#exploring-the-nbev3devsim-simulator" title="Permalink to this headline">¶</a></h1>
<p>In this notebook, you will start to explore the <code class="docutils literal notranslate"><span class="pre">nbev3devsim</span></code> simulator and see how we can use it to run some simple Python programs. In the next notebook, you will see some more examples of Python programs. At this stage the intention is to give you an overview of the sorts of things that are possible, rather than expecting you to learn and remember the details.</p>
<p>As in the previous notebook, the simulator widget is loaded into the notebook by running the following code cell.</p>
<p>When the code cell is run:</p>
<ul class="simple">
<li><p>the notebook content is moved into a column at the left-hand side of the screen</p></li>
<li><p>a resizable draggable pop-up widget containing the simulator is displayed towards the right-hand side of the screen.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nbev3devsim.load_nbev3devwidget</span> <span class="kn">import</span> <span class="n">roboSim</span><span class="p">,</span> <span class="n">eds</span>

<span class="o">%</span><span class="n">load_ext</span> <span class="n">nbev3devsim</span>
</pre></div>
</div>
</div>
</div>
<p>You should only run the cell to load in and display the simulator once in each notebook. If you need to load it in again for some reason:</p>
<ul class="simple">
<li><p>from the notebook <em>Kernel</em> menu, select <em>Restart</em></p></li>
<li><p>run the cell to load in and display the simulator.</p></li>
</ul>
<p>Note that restarting the kernel resets the state of the Python environment to a state akin to loading a new notebook within which no code cells have yet been run.</p>
<div class="section" id="the-simulator-environment-as-a-laboratory">
<h2>4.1 The simulator environment as a laboratory<a class="headerlink" href="#the-simulator-environment-as-a-laboratory" title="Permalink to this headline">¶</a></h2>
<p>By referring to the notebook + simulator widget environment as <em>RoboLab</em>, the implication is that we are thinking of it as a <em>laboratory</em>. Let’s just explore, for a moment, how we might be able to use the environment as an engineering laboratory.</p>
<p>As you may already have seen, the RoboLab <code class="docutils literal notranslate"><span class="pre">nbev3devsim</span></code> simulator provides the following controls, either via the simulator graphical user interface or via the notebook magics used to download code to the simulator:</p>
<ul class="simple">
<li><p>load a background into the simulator world</p></li>
<li><p>configure the robot</p></li>
<li><p>configure obstacles in the simulator world</p></li>
<li><p>pen up / pen down for tracing the path followed by the robot</p></li>
<li><p>clear trace (that is, clear pen trace)</p></li>
<li><p>show chart:</p>
<ul>
<li><p>select trace(s) (colour, left light, right light, ultrasonic, gyro, left wheel, right wheel)</p></li>
</ul>
</li>
<li><p>clear chart</p></li>
<li><p>set light sensor noise value</p></li>
<li><p>set motor/wheel noise value</p></li>
<li><p>set the X- and Y-coordinates and the Angle or orientation of robot; the X- and Y-values are updated when the robot is dragged across the canvas; the <em>Reset</em> button resets the robot’s location and orientation to the default for that background (if set).</p></li>
</ul>
<p>This provides us with a wide range of options for setting up different experiments in the form of particular tasks we want the robot to perform or challenges we want the robot to complete.</p>
<p>The notebook itself represents a laboratory notebook, and you are intended to treat it as such, keeping a personal record of your work and using it to record your own comments, observations and reflections, as well as experimental method, code and results.</p>
<p>For a complete overview of the <code class="docutils literal notranslate"><span class="pre">nbev3devsim</span></code> user interface, see the <code class="docutils literal notranslate"><span class="pre">99.2</span> <span class="pre">nbev3devsim</span> <span class="pre">user</span> <span class="pre">interface</span></code> notebook in the <code class="docutils literal notranslate"><span class="pre">99.</span> <span class="pre">Technical</span> <span class="pre">Appendices</span></code> notebook directory.</p>
<p>For a complete overview of the <code class="docutils literal notranslate"><span class="pre">nbev3devsim</span></code> robot configuration options, see the <code class="docutils literal notranslate"><span class="pre">99.3</span> <span class="pre">nb3ev3devsim</span> <span class="pre">robot</span> <span class="pre">config</span></code> notebook in the <code class="docutils literal notranslate"><span class="pre">99.</span> <span class="pre">Technical</span> <span class="pre">Appendices</span></code> notebook directory.</p>
</div>
<div class="section" id="setting-up-the-laboratory-via-the-simulator-user-interface">
<h2>4.2 Setting up the laboratory via the simulator user interface<a class="headerlink" href="#setting-up-the-laboratory-via-the-simulator-user-interface" title="Permalink to this headline">¶</a></h2>
<p>At the top of the simulator user interface are several toggle buttons that can be used to toggle the display of various panels inside the simulator widget.</p>
<p>When the panel is displayed, the toggle button is highlighted to show that the panel display is enabled.</p>
<p>Also note that some of the panels themselves contain toggle display buttons for revealing yet more panels.</p>
<p>Most of the panel displays can also be toggled using simulator keyboard shortcuts. These are enabled when your mouse cursor is placed within the bounds of the simulator widget. The keyboard shortcuts follow the single character magic switches that can also control the simulator user interface display, and which are described in the next section.</p>
<div class="section" id="activity-using-simulator-toggle-button-controls-to-hide-and-reveal-simulator-widget-display-panels">
<h3>4.2.1 Activity – Using simulator toggle button controls to hide and reveal simulator widget display panels<a class="headerlink" href="#activity-using-simulator-toggle-button-controls-to-hide-and-reveal-simulator-widget-display-panels" title="Permalink to this headline">¶</a></h3>
<p>Repeatedly click the toggle display buttons to see how to toggle the display of various simulator controls on and off.</p>
<p>Position your mouse cursor over the simulator widget and use the following keyboard shortcuts to toggle the panel displays:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">W</span></code> : simulator world display</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">H</span></code> : simulator controls</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">X</span></code> : position controls.</p></li>
</ul>
</div>
<div class="section" id="activity-loading-different-backgrounds-into-the-simulator">
<h3>4.2.2 Activity – Loading different backgrounds into the simulator<a class="headerlink" href="#activity-loading-different-backgrounds-into-the-simulator" title="Permalink to this headline">¶</a></h3>
<p>Use the simulator toggle buttons to display the <em>Settings</em> and <em>World</em> panels in the simulator widget and hide all the other panels, including the <em>Simulator controls</em>.</p>
<p>Using the map selector selection list in the settings panel (with the default value <em>Empty_Map</em>), load in the <em>Testcard</em> background and then hide the <em>Settings</em> panel.</p>
<p>The simulator should now just display the <em>Simulator world</em> panel containing the <em>Testcard</em> background.</p>
<p>Resize the widget, either by clicking and dragging on one of its sides or corners, or by using the widget display buttons in the top right-hand corner of the widget, so that you can see the background clearly.</p>
<p>If you close the simulator widget, you will need to <em>Restart</em> the notebook from the <em>Kernel</em> menu and then rerun the code cell that loaded and displayed the simulator widget to open a new simulator widget.</p>
</div>
</div>
<div class="section" id="setting-up-the-laboratory-helper-magics">
<h2>4.3 Setting up the laboratory – helper magics<a class="headerlink" href="#setting-up-the-laboratory-helper-magics" title="Permalink to this headline">¶</a></h2>
<p>Although we are likely to make use of most of the simulator features over the course of running the module activities as a whole, any particular activity is likely to only require a subset of those features. (The same is true in many laboratories: most of the time, you only need to make use of some of its facilities.)</p>
<p>To set up the simulator environment for any particular task, we can either use the display controls within the simulator user interface (or the keyboard shortcuts associated with it) or we can use lab assistants in the form of various magic switches. These switches can be used either on their own, or in combination with each other, to set up the simulator for us.</p>
<p>To see a full list of magic switches, call the <code class="docutils literal notranslate"><span class="pre">%sim_magic</span></code> command with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> or <code class="docutils literal notranslate"><span class="pre">-h</span></code> flag.</p>
<p>The list may seem quite bewildering at first, but don’t worry: you aren’t expected to be able to remember them all (although you may find you do learn some of them quite quickly).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">sim_magic</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="activity-using-magic-to-toggle-the-display-of-particular-simulator-panels">
<h3>4.3.1 Activity – Using magic to toggle the display of particular simulator panels<a class="headerlink" href="#activity-using-magic-to-toggle-the-display-of-particular-simulator-panels" title="Permalink to this headline">¶</a></h3>
<p>By default, running a magic command will configure the simulator to display the <em>Simulator controls</em> and <em>Simulator world</em> panels:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">sim_magic</span>
</pre></div>
</div>
</div>
</div>
<p>Run the following code cell to set up the simulator to hide the <em>Simulator controls</em> panel (<code class="docutils literal notranslate"><span class="pre">--hide</span> <span class="pre">/</span> <span class="pre">-H</span></code>) and display the <em>Positioning</em> panel (<code class="docutils literal notranslate"><span class="pre">--positioning</span> <span class="pre">/</span> <span class="pre">-X</span></code>); by default, the <em>Simulator world</em> panel will be shown unless we explicitly hide it with the <code class="docutils literal notranslate"><span class="pre">--world</span> <span class="pre">/</span> <span class="pre">-W</span></code> flag.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">sim_magic</span> <span class="o">--</span><span class="n">positioning</span> <span class="o">-</span><span class="n">H</span>
</pre></div>
</div>
</div>
</div>
<p>When we use the single character flags, we can combine then in a single flag. By referring to the list of flags shown by the <code class="docutils literal notranslate"><span class="pre">%sim_magic</span> <span class="pre">--help</span></code> command, can you predict which panels will be displayed using the combination of flags shown in the code cell below?</p>
<p><em>Before running the code cell below, double-click this cell to edit it and record your prediction of what the simulator display will look like after running the code cell to configure.</em></p>
<p><em>Run this cell by clicking the notebook toolbar <code class="docutils literal notranslate"><span class="pre">Run</span></code> button or using the <code class="docutils literal notranslate"><span class="pre">Shift-Return</span></code> keyboard shortcut to return it to its rendered view.</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">sim_magic</span> <span class="o">-</span><span class="n">HWiA</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="activity-using-magic-to-load-in-a-particular-background">
<h3>4.3.2 Activity – Using magic to load in a particular background<a class="headerlink" href="#activity-using-magic-to-load-in-a-particular-background" title="Permalink to this headline">¶</a></h3>
<p>As an example of using some magic to help set up the simulator, let’s load in a specific background using the <code class="docutils literal notranslate"><span class="pre">--background</span> <span class="pre">/</span> <span class="pre">-b</span></code> magic switch. Unlike the previous magic flags, this switch takes an argument in the form of a particular background name.</p>
<p>The background names follow the names on the <em>Settings</em> panel background drop-down list. Examples include <code class="docutils literal notranslate"><span class="pre">Loop</span></code>, <code class="docutils literal notranslate"><span class="pre">Radial_grey</span></code> and <code class="docutils literal notranslate"><span class="pre">MNIST_Digits</span></code>.</p>
<p>Note also the use of other flags to control which panels are displayed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">sim_magic</span> <span class="o">--</span><span class="n">background</span> <span class="n">Radial_grey</span> <span class="o">-</span><span class="n">H</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="downloading-code-to-the-simulator">
<h2>4.4 Downloading code to the simulator<a class="headerlink" href="#downloading-code-to-the-simulator" title="Permalink to this headline">¶</a></h2>
<p>The magic commands we have used so far are so-called <em>line magics</em>. Magics are a special form of IPython (Interactive Python) command that exist ‘outside’ the actual Python language but extend it to allow us to perform various housekeeping duties.</p>
<p>Line magics are prefixed by a single <code class="docutils literal notranslate"><span class="pre">%</span></code> sign and are single-line commands that can appear on any line of a code cell, even in the context of other actual Python language commands.</p>
<p>In addition to line magics, there are also <em>cell magics</em> (also known as code-cell or block-level magics) which are prefixed by two percentage signs, <code class="docutils literal notranslate"><span class="pre">%%</span></code>.</p>
<p>Block-level magics <em>must</em> be prefixed by two percentage signs – <code class="docutils literal notranslate"><span class="pre">%%</span></code> – and <em>must</em> appear at the very start of the first line of a code cell. Even one or more blank lines or comment lines at the start of a code cell before the <code class="docutils literal notranslate"><span class="pre">%%</span></code> cell magic prefix will break things.</p>
<p>Block-level magics applied to a cell are used to modify the behaviour of that cell and the rest of its contents.</p>
<p>The RoboLab environment supports three sorts of cell magic, which you will explore in more detail in the next notebook:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">%%sim_magic</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%%sim_magic_imports</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%%sim_magic</span> <span class="pre">preloaded</span></code></p></li>
</ul>
<p>The switches you have seen previously all work with each of these magics.</p>
<p>When a code cell prefixed by one of the RoboLab block magics is run, the code is not executed by the notebook’s Python environment, but instead is downloaded to the simulated robot in the <code class="docutils literal notranslate"><span class="pre">nbev3devsim</span></code> simulator. The code can then be executed <em>in the simulator</em> in order to control the simulated robot.</p>
<p>If you run the following code cell, you will download a simple program that prints the message <em>Hello world!</em> to the simulator’s output panel. The output window is displayed <em>from the magic</em> using the <code class="docutils literal notranslate"><span class="pre">-O</span></code> or <code class="docutils literal notranslate"><span class="pre">--output</span></code> switch, acting in combination with the <code class="docutils literal notranslate"><span class="pre">-W</span></code> switch which hides the <em>Simulator world</em> panel.</p>
<p>Once you have run the following cell to download the code to the simulator, click the <em>Run</em> button in the <em>Simulator controls</em> panel to run the code and display the message in the simulator <em>Output panel</em> display area.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="n">sim_magic</span> <span class="o">-</span><span class="n">OW</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello world!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>As well as running programs in the simulator manually, you can also use the <code class="docutils literal notranslate"><span class="pre">--autorun</span></code> or <code class="docutils literal notranslate"><span class="pre">-R</span></code> magic switch to automatically run the code once it has been successfully downloaded.</p>
<p>Run the following code cell to see this in action:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="n">sim_magic</span> <span class="o">-</span><span class="n">OWH</span> <span class="o">-</span><span class="n">R</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello world again!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="activity-downloading-your-own-program">
<h3>4.4.1 Activity – Downloading your own program<a class="headerlink" href="#activity-downloading-your-own-program" title="Permalink to this headline">¶</a></h3>
<p>In the following code cell, define your own block magic that will display just the simulator <em>Output</em> panel and the <em>Sensor arrays</em> panel. The command should also load in the <em>Simple_Shapes</em> background. Your program should print a message of your choosing to the <em>Output</em> display window. Finally, when you run the code cell, it should be automatically run by the simulator.</p>
<p><em>Hint: the block-level magic <strong>must</strong> appear on the first line of the code cell.</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ADD YOUR MAGIC AND CODE HERE</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-solution">
<h4>Example solution<a class="headerlink" href="#example-solution" title="Permalink to this headline">¶</a></h4>
<p>Click the arrow in the sidebar or run this cell to reveal an example solution.</p>
<p>To display the <em>Output panel</em> (<code class="docutils literal notranslate"><span class="pre">-O</span></code>) and <em>Sensor array</em> (<code class="docutils literal notranslate"><span class="pre">-A</span></code>) panel, and hide the open by default <em>Simulator controls</em> and <em>Simulator world</em> panels (<code class="docutils literal notranslate"><span class="pre">-H</span></code> and <code class="docutils literal notranslate"><span class="pre">-W</span></code> respectively) I created the combined switch <code class="docutils literal notranslate"><span class="pre">-HWOA</span></code>.</p>
<p>To load in the background, I used the <code class="docutils literal notranslate"><span class="pre">-b</span> <span class="pre">Simple_Shapes</span></code> switch.</p>
<p>To autorun the program, I used the <code class="docutils literal notranslate"><span class="pre">--autorun</span></code> switch.</p>
<p>The message I decided to print was <em>I guess that’s a success:-)</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="n">sim_magic</span> <span class="o">-</span><span class="n">HWOA</span> <span class="o">-</span><span class="n">b</span> <span class="n">Simple_Shapes</span> <span class="o">--</span><span class="n">autorun</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I guess that&#39;s a success:-)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="showing-a-downloaded-program-listing">
<h3>4.4.2 Showing a downloaded program listing<a class="headerlink" href="#showing-a-downloaded-program-listing" title="Permalink to this headline">¶</a></h3>
<p>To view the program that is currently loaded into the simulator, in the <em>Simulator control</em> panel click the <em>Code display</em> button or run some magic with the <code class="docutils literal notranslate"><span class="pre">--code</span></code> or <code class="docutils literal notranslate"><span class="pre">-D</span></code> switch to display the <em>Code display</em> panel.</p>
<p>This is particularly useful when debugging your own programs, because error messages often display the line number that caused the error, and the <em>Code display</em> panel lists the full program downloaded to the simulator, along with line numbers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="n">sim_magic_imports</span> <span class="o">--</span><span class="n">code</span> <span class="o">-</span><span class="n">HW</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I wrote this bit...&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">--preview</span></code> or <code class="docutils literal notranslate"><span class="pre">-v</span></code> switch to print the code downloaded to the simulator as output from the code cell.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="n">sim_magic_preloaded</span> <span class="o">--</span><span class="n">preview</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="summary">
<h2>4.5 Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In this notebook, you have learned how to control the <code class="docutils literal notranslate"><span class="pre">nbev3devsim</span></code> simulator including how to automate its display configuration using magic commands and how to display and print items in the simulator <em>Output</em> panel.</p>
<p>You have also already started to learn how to write simple computer programs in the form of simple one-line magic scripts that can be used to perform particular actions regarding setting up the <code class="docutils literal notranslate"><span class="pre">nbev3devsim</span></code> simulator. Writing command scripts such as these is often referred to as <em>automation</em>: creating scripts that can automatically perform tasks on our behalf that we might otherwise have to perform manually, such as by operating the simulator user interface ourselves.</p>
<p>Using block-level magics, you have seen how we can create a very simple program and download it to the simulator, as well as running it using simulator user-interface controls or automatically on download. You have also learned how to preview the currently downloaded program in the simulator <em>Code display</em> panel, as well as in the output area of a code cell in the notebook.</p>
<p>In the next notebook, you will see some actual robot programs in action to get a feel for the sorts of things we can program the robot to do in the simulator.</p>
<p><em>But first, you surely learned something you would like to keep a note of in your own summary notes for this notebook?!</em></p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./01. Introducing notebooks and the RoboLab environment"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="01.3%20Introducing%20nbev3devsim.html" title="previous page">3 The RoboLab simulated on-screen robot (<code class="docutils literal notranslate"><span class="pre">nbev3devsim</span></code>)</a>
    <a class='right-next' id="next-link" href="01.5%20Example%20robot%20program.html" title="next page">5 An example robot program</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>